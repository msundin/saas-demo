# ==============================================================================
# LOCAL DEVELOPMENT (Recommended for getting started)
# ==============================================================================
# Copy this file to .env.local and use these values for local Supabase:
#
# NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
# NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
# DATABASE_URL=postgresql://postgres:postgres@127.0.0.1:54322/postgres
#
# Then run: pnpm supabase start && pnpm dev
# ==============================================================================

# ==============================================================================
# PRODUCTION / REMOTE SUPABASE
# ==============================================================================
# Supabase Configuration
# Get these from: https://supabase.com/dashboard/project/_/settings/api

NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Database URLs
# Get from: Supabase Dashboard → Settings → Database → Connection String

# Pooled connection (port 6543) - Use for runtime queries
# This uses Supavisor (PgBouncer) for connection pooling
DATABASE_URL=postgresql://postgres.[project-ref]:[password]@aws-0-region.pooler.supabase.com:6543/postgres?sslmode=require

# Direct connection (port 5432) - Use ONLY for migrations and maintenance
DIRECT_DATABASE_URL=postgresql://postgres.[project-ref]:[password]@db.[project-ref].supabase.co:5432/postgres?sslmode=require

# Application URL
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Optional: Error Tracking
# Uncomment and add your Sentry DSN if using Sentry for error tracking
# SENTRY_DSN=your-sentry-dsn-here

# Optional: Service Role Key (USE WITH EXTREME CAUTION)
# This bypasses ALL Row Level Security policies
# Only use for admin operations, background jobs, or webhooks
# NEVER expose to client-side code
# SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ==============================================================================
# DEPLOYMENT CONFIGURATION
# ==============================================================================
# See .claude/DEPLOYMENT.md for comprehensive deployment guide

# SEO Protection (Block search engines from indexing demo/template sites)
# Set to 'noindex' to block search engines (for demo/template deployments)
# Omit or set to any other value to allow indexing (for production apps)
NEXT_PUBLIC_ROBOTS=noindex

# ==============================================================================
# DEPLOYMENT SCENARIOS (Three-Tier Strategy)
# ==============================================================================
# See .claude/DEPLOYMENT.md for comprehensive deployment guide

# ------------------------------------------------------------------------------
# TIER 1: saas-demo (Cloud Deployment Validation + Customer Demos)
# ------------------------------------------------------------------------------
# Repository: msundin/saas-demo (separate repo cloned from template)
# Purpose: Validate cloud deployment, maintain reliable demo
# Frontend: Vercel Free
# Backend: Supabase Cloud Free (Project #1 of 2)
# Domain: demo.infswsol.com
#
# Environment Variables (in Vercel Dashboard):
#   NEXT_PUBLIC_SUPABASE_URL=https://abcdefgh.supabase.co
#   NEXT_PUBLIC_SUPABASE_ANON_KEY=<from-supabase-cloud-project>
#   DATABASE_URL=postgresql://postgres.[project-ref]:[password]@aws-0-region.pooler.supabase.com:6543/postgres
#   NEXT_PUBLIC_APP_URL=https://demo.infswsol.com
#   NEXT_PUBLIC_ROBOTS=noindex
#
# Cost: $0/month (within Supabase free tier: 500MB, 50k MAU)
# Deploy first to validate cloud deployment workflow

# ------------------------------------------------------------------------------
# TIER 2: saas-template (OPTIONAL Remote Testing)
# ------------------------------------------------------------------------------
# Repository: msundin/saas-template (this repo)
# Purpose: Source code template, local development
# Frontend: Vercel Free (optional deployment)
# Backend: TrueNAS Supabase (optional for remote testing)
# Domain: saas-template.infswsol.com (optional)
#
# Environment Variables (if deployed):
#   NEXT_PUBLIC_SUPABASE_URL=https://saas-template-api.infswsol.com
#   NEXT_PUBLIC_SUPABASE_ANON_KEY=<from-truenas-template-env>
#   DATABASE_URL=postgresql://postgres:<password>@saas-template-api.infswsol.com:5433/postgres
#   NEXT_PUBLIC_APP_URL=https://saas-template.infswsol.com
#   NEXT_PUBLIC_ROBOTS=noindex
#
# Cost: $0/month (TrueNAS self-hosted)
# Recommendation: Keep as local-only development, no deployment needed

# ------------------------------------------------------------------------------
# TIER 3: Production Apps - Bootstrap Phase (app1-20)
# ------------------------------------------------------------------------------
# Repository: Cloned from saas-template for each app
# Purpose: Test product-market fit for real SaaS ideas
# Frontend: Vercel Free
# Backend: TrueNAS Supabase (self-hosted)
# Domains: app1.novatratech.com, app2.novatratech.com, etc.
#
# Example for app1.novatratech.com (Bootstrap Phase):
#   NEXT_PUBLIC_SUPABASE_URL=https://app1-api.novatratech.com
#   NEXT_PUBLIC_SUPABASE_ANON_KEY=<from-truenas-app1-env>
#   DATABASE_URL=postgresql://postgres:<password>@app1-api.novatratech.com:5434/postgres
#   NEXT_PUBLIC_APP_URL=https://app1.novatratech.com
#   # No NEXT_PUBLIC_ROBOTS (production app, allow indexing)
#
# Cost: $0/month for unlimited apps (TrueNAS self-hosted)
# Duration: 0-100 users OR until paying customers

# ------------------------------------------------------------------------------
# TIER 3: Production Apps - Cloud Migration (When Successful)
# ------------------------------------------------------------------------------
# Migrate individual successful apps to Supabase Cloud
# Trigger: 100+ daily active users OR paying customers
#
# Example for app1.novatratech.com (After Migration):
#   NEXT_PUBLIC_SUPABASE_URL=https://xyz789.supabase.co
#   NEXT_PUBLIC_SUPABASE_ANON_KEY=<from-supabase-cloud-app1>
#   DATABASE_URL=postgresql://postgres.[project-ref]:[password]@aws-0-region.pooler.supabase.com:6543/postgres
#   NEXT_PUBLIC_APP_URL=https://app1.novatratech.com
#   # No NEXT_PUBLIC_ROBOTS (production app, allow indexing)
#
# Cost: $25/month (Supabase Pro), $20/month (Vercel Pro if needed)
# Only pay when app is successful (has users/revenue)

# ------------------------------------------------------------------------------
# MIGRATION PATH
# ------------------------------------------------------------------------------
# 1. Deploy saas-demo to cloud (Vercel + Supabase Cloud)
#    → Validates deployment workflow
#    → Tests template cloning process
#    → Creates always-available demo
#
# 2. Deploy production apps to TrueNAS (Vercel Free + TrueNAS Supabase)
#    → Test unlimited SaaS ideas for $0/month
#    → No financial pressure during validation
#
# 3. When app becomes successful (100+ users OR paying customers):
#    → Export from TrueNAS: pg_dump
#    → Create Supabase Cloud project (use Free Project #2 first)
#    → Import to cloud: pg_restore
#    → Update Vercel environment variables
#    → Users keep accounts (passwords preserved, zero downtime)
#    → Other apps stay free on TrueNAS
#
# 4. Scale successful apps:
#    → Supabase Cloud Paid when 500MB exceeded ($25/mo)
#    → Vercel Pro when bandwidth needed ($20/mo)
#
# See .claude/DEPLOYMENT.md for detailed step-by-step guides
