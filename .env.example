# ==============================================================================
# LOCAL DEVELOPMENT (Recommended for getting started)
# ==============================================================================
# Copy this file to .env.local and use these values for local Supabase:
#
# NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
# NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
# DATABASE_URL=postgresql://postgres:postgres@127.0.0.1:54322/postgres
#
# Then run: pnpm supabase start && pnpm dev
# ==============================================================================

# ==============================================================================
# PRODUCTION / REMOTE SUPABASE
# ==============================================================================
# Supabase Configuration
# Get these from: https://supabase.com/dashboard/project/_/settings/api

NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Database URLs
# Get from: Supabase Dashboard → Settings → Database → Connection String

# Pooled connection (port 6543) - Use for runtime queries
# This uses Supavisor (PgBouncer) for connection pooling
DATABASE_URL=postgresql://postgres.[project-ref]:[password]@aws-0-region.pooler.supabase.com:6543/postgres?sslmode=require

# Direct connection (port 5432) - Use ONLY for migrations and maintenance
DIRECT_DATABASE_URL=postgresql://postgres.[project-ref]:[password]@db.[project-ref].supabase.co:5432/postgres?sslmode=require

# Application URL
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Optional: Error Tracking
# Uncomment and add your Sentry DSN if using Sentry for error tracking
# SENTRY_DSN=your-sentry-dsn-here

# Optional: Service Role Key (USE WITH EXTREME CAUTION)
# This bypasses ALL Row Level Security policies
# Only use for admin operations, background jobs, or webhooks
# NEVER expose to client-side code
# SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ==============================================================================
# DEPLOYMENT CONFIGURATION
# ==============================================================================
# See .claude/DEPLOYMENT.md for comprehensive deployment guide

# SEO Protection (Block search engines from indexing demo/template sites)
# Set to 'noindex' to block search engines (for demo/template deployments)
# Omit or set to any other value to allow indexing (for production apps)
NEXT_PUBLIC_ROBOTS=noindex

# ==============================================================================
# DEPLOYMENT SCENARIOS
# ==============================================================================

# ------------------------------------------------------------------------------
# SCENARIO 1: Bootstrap / Self-Hosted (TrueNAS + Vercel)
# ------------------------------------------------------------------------------
# Frontend: Vercel (free tier, global CDN)
# Backend: Supabase on your TrueNAS SCALE server (via Cloudflare Tunnel or DDNS)
#
# Example for demo.infswsol.com:
#   NEXT_PUBLIC_SUPABASE_URL=https://demo-api.infswsol.com
#   NEXT_PUBLIC_SUPABASE_ANON_KEY=<from-truenas-demo-env>
#   DATABASE_URL=postgresql://postgres:<password>@demo-api.infswsol.com:5432/postgres
#   NEXT_PUBLIC_APP_URL=https://demo.infswsol.com
#   NEXT_PUBLIC_ROBOTS=noindex
#
# Example for template.infswsol.com:
#   NEXT_PUBLIC_SUPABASE_URL=https://template-api.infswsol.com
#   NEXT_PUBLIC_SUPABASE_ANON_KEY=<from-truenas-template-env>
#   DATABASE_URL=postgresql://postgres:<password>@template-api.infswsol.com:5433/postgres
#   NEXT_PUBLIC_APP_URL=https://template.infswsol.com
#   NEXT_PUBLIC_ROBOTS=noindex
#
# Cost: $0/month for unlimited apps (using your TrueNAS server)

# ------------------------------------------------------------------------------
# SCENARIO 2: Production / Cloud (Supabase Cloud + Vercel)
# ------------------------------------------------------------------------------
# Migrate successful apps to Supabase Cloud for global performance and managed infrastructure
#
# Example for app1.novatratech.com:
#   NEXT_PUBLIC_SUPABASE_URL=https://abc123.supabase.co
#   NEXT_PUBLIC_SUPABASE_ANON_KEY=<from-supabase-cloud-project>
#   DATABASE_URL=postgresql://postgres.<project-ref>:<password>@aws-0-region.pooler.supabase.com:6543/postgres
#   NEXT_PUBLIC_APP_URL=https://app1.novatratech.com
#   # No NEXT_PUBLIC_ROBOTS (allow search engine indexing)
#
# Cost: $45/month per app ($20 Vercel Pro + $25 Supabase Pro)

# ------------------------------------------------------------------------------
# MIGRATION PATH
# ------------------------------------------------------------------------------
# 1. Start with Scenario 1 (free, unlimited apps on TrueNAS)
# 2. Test product-market fit without cost pressure
# 3. When app reaches 100+ daily active users or has paying customers:
#    - Migrate to Scenario 2 (Supabase Cloud)
#    - Export database from TrueNAS: pg_dump
#    - Import to Supabase Cloud: pg_restore
#    - Update Vercel environment variables
#    - Users keep existing accounts (passwords preserved)
# 4. Other apps stay free on TrueNAS until they need cloud infrastructure
#
# See .claude/DEPLOYMENT.md for step-by-step migration guide
